<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE  mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ityueqiangu.project.userinfo.mapper.UserMapper">
	<resultMap id="BaseResultMap" type="com.ityueqiangu.project.userinfo.domain.User">
        <result column="id" property="id" />
        <result column="login_name" property="loginName" />
        <result column="password" property="password" />
        <result column="user_name" property="userName" />
        <result column="idcard_no" property="idcardNo" />
        <result column="email" property="email" />
        <result column="avatar" property="avatar" />
        <result column="sex" property="sex" />
        <result column="phone" property="phone" />
        <result column="is_active" property="isActive" />
        <result column="last_login_time" property="lastLoginTime" />
        <result column="register_type" property="registerType" />
        <result column="is_enable" property="isEnable" />
        <result column="remark" property="remark" />
        <result column="is_deleted" property="isDeleted" />
        <result column="create_by" property="createBy" />
        <result column="create_time" property="createTime" />
        <result column="update_by" property="updateBy" />
        <result column="update_time" property="updateTime" />
	</resultMap>  
    
    <!-- 表字段 -->
    <sql id="baseColumns">
     t.id
    , t.login_name
    , t.password
    , t.user_name
    , t.idcard_no
    , t.email
    , t.avatar
    , t.sex
    , t.phone
    , t.is_active
    , t.last_login_time
    , t.register_type
    , t.is_enable
    , t.remark
    , t.is_deleted
    , t.create_by
    , t.create_time
    , t.update_by
    , t.update_time
    </sql> 
    
    <!-- 分页查询 -->
    <select id="selectUserList" resultMap="BaseResultMap" parameterType="com.ityueqiangu.project.userinfo.domain.User">
		SELECT         
        	<include refid="baseColumns" />
		FROM t_user t
        <trim prefix="WHERE" prefixOverrides="AND | OR">            
           <if test="id != null" >
             and t.id= #{id} 
           </if>
           <if test="loginName != null and loginName != ''" >
             and t.login_name= #{loginName} 
           </if>
           <if test="password != null and password != ''" >
             and t.password= #{password} 
           </if>
           <if test="userName != null and userName != ''" >
             and t.user_name= #{userName} 
           </if>
           <if test="idcardNo != null and idcardNo != ''" >
             and t.idcard_no= #{idcardNo} 
           </if>
           <if test="email != null and email != ''" >
             and t.email= #{email} 
           </if>
           <if test="avatar != null and avatar != ''" >
             and t.avatar= #{avatar} 
           </if>
           <if test="sex != null and sex != ''" >
             and t.sex= #{sex} 
           </if>
           <if test="phone != null and phone != ''" >
             and t.phone= #{phone} 
           </if>
           <if test="isActive != null and isActive != ''" >
             and t.is_active= #{isActive} 
           </if>
           <if test="lastLoginTime != null" >
             and t.last_login_time= #{lastLoginTime} 
           </if>
           <if test="registerType != null and registerType != ''" >
             and t.register_type= #{registerType} 
           </if>
           <if test="isEnable != null and isEnable != ''" >
             and t.is_enable= #{isEnable} 
           </if>
           <if test="remark != null and remark != ''" >
             and t.remark= #{remark} 
           </if>
           <if test="isDeleted != null and isDeleted != ''" >
             and t.is_deleted= #{isDeleted} 
           </if>
           <if test="createBy != null and createBy != ''" >
             and t.create_by= #{createBy} 
           </if>
           <if test="createTime != null" >
             and t.create_time= #{createTime} 
           </if>
           <if test="updateBy != null and updateBy != ''" >
             and t.update_by= #{updateBy} 
           </if>
           <if test="updateTime != null" >
             and t.update_time= #{updateTime} 
           </if>
        </trim>
	</select>
 
 	<!-- 根据主键获取单条记录 -->
    <select id="selectUserById" resultMap="BaseResultMap" parameterType="Integer">
		SELECT         
        	<include refid="baseColumns" />
		FROM t_user t
        <trim prefix="WHERE" prefixOverrides="AND|OR">
            <if test="id != null  " >
                t.id = #{id}
            </if>
        </trim>
	</select>

    <select id="getOne" resultMap="BaseResultMap" parameterType="com.ityueqiangu.project.userinfo.domain.User">
        SELECT
        <include refid="baseColumns" />
        FROM t_user t
        <trim prefix="WHERE" prefixOverrides="AND|OR">
            <if test="loginName != null and loginName != ''" >
                and t.login_name= #{loginName}
            </if>
            <if test="idcardNo != null and idcardNo != ''" >
                and t.idcard_no= #{idcardNo}
            </if>
        </trim>
    </select>

    <!-- 插入 -->
    <insert id="insertUser" parameterType="com.ityueqiangu.project.userinfo.domain.User"
        keyProperty="id" keyColumn="id" useGeneratedKeys="true">
        INSERT INTO t_user    
        <trim prefix="(" suffix=")" suffixOverrides=",">	 
          <if test="loginName != null and loginName != ''">
          	login_name,
          </if>
          <if test="password != null and password != ''">
          	password,
          </if>
          <if test="userName != null and userName != ''">
          	user_name,
          </if>
          <if test="idcardNo != null and idcardNo != ''">
          	idcard_no,
          </if>
          <if test="email != null and email != ''">
          	email,
          </if>
          <if test="avatar != null and avatar != ''">
          	avatar,
          </if>
          <if test="sex != null and sex != ''">
          	sex,
          </if>
          <if test="phone != null and phone != ''">
          	phone,
          </if>
          <if test="isActive != null and isActive != ''">
          	is_active,
          </if>
          <if test="lastLoginTime != null">
          	last_login_time,
          </if>
          <if test="registerType != null and registerType != ''">
          	register_type,
          </if>
          <if test="isEnable != null and isEnable != ''">
          	is_enable,
          </if>
          <if test="remark != null and remark != ''">
          	remark,
          </if>
          <if test="isDeleted != null and isDeleted != ''">
          	is_deleted,
          </if>
          <if test="createBy != null and createBy != ''">
          	create_by,
          </if>
          <if test="createTime != null">
          	create_time,
          </if>
          <if test="updateBy != null and updateBy != ''">
          	update_by,
          </if>
          <if test="updateTime != null">
          	update_time,
          </if>
        </trim>
        <trim prefix="VALUES (" suffix=")" suffixOverrides=",">            
          <if test="loginName != null and loginName != ''" >
            #{loginName},                    
          </if>
          <if test="password != null and password != ''" >
            #{password},                    
          </if>
          <if test="userName != null and userName != ''" >
            #{userName},                    
          </if>
          <if test="idcardNo != null and idcardNo != ''" >
            #{idcardNo},                    
          </if>
          <if test="email != null and email != ''" >
            #{email},                    
          </if>
          <if test="avatar != null and avatar != ''" >
            #{avatar},                    
          </if>
          <if test="sex != null and sex != ''" >
            #{sex},                    
          </if>
          <if test="phone != null and phone != ''" >
            #{phone},                    
          </if>
          <if test="isActive != null and isActive != ''" >
            #{isActive},                    
          </if>
          <if test="lastLoginTime != null" >
            #{lastLoginTime},                    
          </if>
          <if test="registerType != null and registerType != ''" >
            #{registerType},                    
          </if>
          <if test="isEnable != null and isEnable != ''" >
            #{isEnable},                    
          </if>
          <if test="remark != null and remark != ''" >
            #{remark},                    
          </if>
          <if test="isDeleted != null and isDeleted != ''" >
            #{isDeleted},                    
          </if>
          <if test="createBy != null and createBy != ''" >
            #{createBy},                    
          </if>
          <if test="createTime != null" >
            #{createTime},                    
          </if>
          <if test="updateBy != null and updateBy != ''" >
            #{updateBy},                    
          </if>
          <if test="updateTime != null" >
            #{updateTime},                    
          </if>
        </trim>
    </insert>    
    
    <!-- 更新 -->
    <update id="updateUser" parameterType="com.ityueqiangu.project.userinfo.domain.User">
    UPDATE t_user
    <set>
       <if test="loginName != null and loginName != '' " >
         login_name=#{loginName},                 
       </if>
       <if test="password != null and password != '' " >
         password=#{password},                 
       </if>
       <if test="userName != null and userName != '' " >
         user_name=#{userName},                 
       </if>
       <if test="idcardNo != null and idcardNo != '' " >
         idcard_no=#{idcardNo},                 
       </if>
       <if test="email != null and email != '' " >
         email=#{email},                 
       </if>
       <if test="avatar != null and avatar != '' " >
         avatar=#{avatar},                 
       </if>
       <if test="sex != null and sex != '' " >
         sex=#{sex},                 
       </if>
       <if test="phone != null and phone != '' " >
         phone=#{phone},                 
       </if>
       <if test="isActive != null and isActive != '' " >
         is_active=#{isActive},                 
       </if>
       <if test="lastLoginTime != null" >
         last_login_time=#{lastLoginTime},                 
       </if>
       <if test="registerType != null and registerType != '' " >
         register_type=#{registerType},                 
       </if>
       <if test="isEnable != null and isEnable != '' " >
         is_enable=#{isEnable},                 
       </if>
       <if test="remark != null and remark != '' " >
         remark=#{remark},                 
       </if>
       <if test="isDeleted != null and isDeleted != '' " >
         is_deleted=#{isDeleted},                 
       </if>
       <if test="createBy != null and createBy != '' " >
         create_by=#{createBy},                 
       </if>
       <if test="createTime != null" >
         create_time=#{createTime},                 
       </if>
       <if test="updateBy != null and updateBy != '' " >
         update_by=#{updateBy},                 
       </if>
       <if test="updateTime != null" >
         update_time=#{updateTime},                 
       </if>
    </set>
    WHERE id = #{id}
    </update>

	<!-- 根据主键删除记录 -->
	<delete id="deleteUserById" parameterType="Integer">
        delete from t_user where id = #{id}
	</delete>
    
    <!-- 根据条件删除记录 -->
	<delete id="deleteUserByCondition" parameterType="com.ityueqiangu.project.userinfo.domain.User">
        delete from t_user 
        <trim prefix="WHERE" prefixOverrides="AND | OR">            
           <if test="id != null" >
             and t.id= #{id} 
           </if>
           <if test="loginName != null and loginName != '' " >
             and t.login_name= #{loginName} 
           </if>
           <if test="password != null and password != '' " >
             and t.password= #{password} 
           </if>
           <if test="userName != null and userName != '' " >
             and t.user_name= #{userName} 
           </if>
           <if test="idcardNo != null and idcardNo != '' " >
             and t.idcard_no= #{idcardNo} 
           </if>
           <if test="email != null and email != '' " >
             and t.email= #{email} 
           </if>
           <if test="avatar != null and avatar != '' " >
             and t.avatar= #{avatar} 
           </if>
           <if test="sex != null and sex != '' " >
             and t.sex= #{sex} 
           </if>
           <if test="phone != null and phone != '' " >
             and t.phone= #{phone} 
           </if>
           <if test="isActive != null and isActive != '' " >
             and t.is_active= #{isActive} 
           </if>
           <if test="lastLoginTime != null" >
             and t.last_login_time= #{lastLoginTime} 
           </if>
           <if test="registerType != null and registerType != '' " >
             and t.register_type= #{registerType} 
           </if>
           <if test="isEnable != null and isEnable != '' " >
             and t.is_enable= #{isEnable} 
           </if>
           <if test="remark != null and remark != '' " >
             and t.remark= #{remark} 
           </if>
           <if test="isDeleted != null and isDeleted != '' " >
             and t.is_deleted= #{isDeleted} 
           </if>
           <if test="createBy != null and createBy != '' " >
             and t.create_by= #{createBy} 
           </if>
           <if test="createTime != null" >
             and t.create_time= #{createTime} 
           </if>
           <if test="updateBy != null and updateBy != '' " >
             and t.update_by= #{updateBy} 
           </if>
           <if test="updateTime != null" >
             and t.update_time= #{updateTime} 
           </if>
        </trim>
	</delete>

</mapper>